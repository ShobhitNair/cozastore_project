<% if(isLoggedin) { %> <%- include('../layouts/userLoggedinHeader') %> <% }else
{ %> <%- include('../layouts/userHeader') %> <% } %>

<div class="nk-main">
  <div class="container">
    <div class="nk-store nk-store-checkout">
      <h3 class="nk-decorated-h-2">
        <span><span class="text-main-1">Billing</span> Details</span>
      </h3>

      <!-- START: Billing Details -->
      <div class="nk-gap"></div>
      <form action="/checkout" method="post" class="nk-form">
        <div class="row vertical-gap">
          <div class="col-lg-6">
            <div class="nk-gap-1"></div>
            <label for="country-sel"
              >Country <span class="text-main-1">*</span>:</label
            >
            <select
              name="country"
              class="form-control required"
              id="country-sel"
              required
            >
              <option value="none">Select a country...</option>
              <option value="India">India</option>
              <option value="USA">USA</option>
              <option value="UK">UK</option>
              <option value="KSA">KSA</option>
            </select>
          </div>
          <div class="col-lg-6">
            <div class="nk-gap-2"></div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="payment"
                id="exampleRadios1"
                value="Cash-on-Dilevery"
                checked
              />
              <label class="form-check-label" for="exampleRadios1">
                Cash on Dilevery
              </label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="payment"
                id="exampleRadios2"
                value="RazorPay"
              />
              <label class="form-check-label" for="exampleRadios2">
                RazorPay
              </label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="payment"
                id="exampleRadios3"
                value="PayPal"
              />
              <label class="form-check-label" for="exampleRadios3">
                PayPal
              </label>
            </div>
          </div>
          <div class="col-lg-12">
            <label for="address"
              >Address <span class="text-main-1">*</span>:</label
            >
            <input
              type="text"
              class="form-control required"
              name="address"
              id="address"
              required
            />

            <div class="nk-gap-1"></div>
            <label for="city"
              >Town / City <span class="text-main-1">*</span>:</label
            >
            <input
              type="text"
              class="form-control required"
              name="city"
              id="city"
              required
            />

            <div class="nk-gap-1"></div>
            <div class="row vertical-gap">
              <div class="col-sm-6">
                <label for="state"
                  >State / Country <span class="text-main-1">*</span>:</label
                >
                <input
                  type="text"
                  class="form-control required"
                  name="state"
                  id="state"
                  required
                />
              </div>
              <div class="col-sm-6">
                <label for="zip"
                  >Postcode / ZIP <span class="text-main-1">*</span>:</label
                >
                <input
                  type="tel"
                  class="form-control required"
                  name="zip"
                  id="zip"
                  required
                />
              </div>
            </div>

            <div class="nk-gap-1"></div>
          </div>
        </div>

        <button
          type="submit"
          class="flex-c-m stext-90 cl0 size-101 bg1 bor1 hov-btn1 p-lr-6 trans-04 js-addcart-detail"
          style="margin: 3rem"
          href=""
        >
          Place Order
        </button>
      </form>
      <!-- END: Billing Details -->

      <!-- START: Order Products -->
      <div class="nk-gap-3"></div>
      <h3 class="nk-decorated-h-2">
        <span><span class="text-main-1">Your</span> Order</span>
      </h3>
      <div class="nk-gap"></div>
      <div class="table-responsive">
        <table class="nk-table nk-table-sm">
          <% if(id) { %>
          <thead class="thead-default">
            <tr>
              <th class="nk-product-cart-title">Product</th>
              <th class="nk-product-cart-total">Total</th>
            </tr>
          </thead>
          <tbody>
            <% for(let key of cartProducts.item){ %>
            <tr>
              <td class="nk-product-cart-title">
                <%= key.productId.name %> &times; <%= key.qty %>
              </td>
              <td class="nk-product-cart-total">
                ₹ <%= key.productId.price*key.qty %>
              </td>
            </tr>
            <% } %>

            <tr class="nk-store-cart-totals-subtotal">
              <td>Subtotal</td>
              <td>₹ <%= cartProducts.totalPrice %></td>
            </tr>
            <tr class="nk-store-cart-totals-shipping">
              <td>Shipping</td>
              <td>Free Shipping</td>
            </tr>
            <tr class="nk-store-cart-totals-shipping">
              <td>Coupon</td>
              <td><%= offer.name %></td>
            </tr>
            <tr class="nk-store-cart-totals-total">
              <td>Total</td>
              <td>₹ <%= couponTotal %></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- END: Order Products -->

      <div class="nk-gap-2"></div>
    </div>
  </div>
  <div class="nk-gap-2"></div>

  <% }else{ %>
  <h4>Not Signed in. <br />Signin to access Checkout</h4>
  <a href="/login" class="btn btn-danger ml-2">login</a>
  <div class="nk-gap-2"></div>
  <% } %>
</div>

<%- include('../layouts/userFooter') %>
